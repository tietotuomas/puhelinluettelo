(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),o=t(3),i=t(2),u=t(4),s=t.n(u),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){return s.a.post(l,e).then((function(e){return e.data}))},remove:function(e){s.a.delete(l+"/"+e)},update:function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))}},j=t(0),m=function(e){e.filter;var n=e.handleFilter;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("p",{children:["filter shown with",Object(j.jsx)("input",{type:"text",onChange:n})]})})},b=function(e){var n=e.newName,t=e.newNumber,r=e.handleNewName,a=e.handleNewPerson,c=e.handleNewNumber;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{onSubmit:a,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:n,onChange:r})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:t,onChange:c})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},f=function(e){var n=e.person,t=e.handleDelete;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("p",{children:[n.name," ",n.number," ",Object(j.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})})},h=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return""===t?Object(j.jsx)(j.Fragment,{children:n.map((function(e){return Object(j.jsx)(f,{person:e,handleDelete:r},e.name)}))}):Object(j.jsx)(j.Fragment,{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(j.jsx)(f,{person:e,handleDelete:r},e.name)}))})},O=function(e){var n=e.message;return""===n.message?null:n.error?Object(j.jsx)("div",{className:"error",children:n.message}):Object(j.jsx)("div",{className:"confirmation",children:n.message})},p=(t(39),function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),u=Object(o.a)(a,2),s=u[0],l=u[1],f=Object(i.useState)(""),p=Object(o.a)(f,2),v=p[0],x=p[1],g=Object(i.useState)(""),w=Object(o.a)(g,2),N=w[0],D=w[1],F={message:"",error:!1},k=Object(i.useState)(F),y=Object(o.a)(k,2),C=y[0],S=y[1];Object(i.useEffect)((function(){d.getAll().then((function(e){r(e)}))}),[]);var A=function(){var e=t.find((function(e){return e.name===s})),n=Object(c.a)(Object(c.a)({},e),{},{number:v});d.update(n.id,n).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),E(n)})).catch((function(e){l(""),x("");var n={message:"Information of ".concat(s," has already been removed from the server."),error:!0};S(n),I();var a=t.filter((function(e){return e.name!==s}));r(a)}))},P=function(e){l(""),x("");var n={message:"Added ".concat(e.name),error:!1};S(n),I()},E=function(e){l(""),x("");var n={message:"Updated ".concat(e.name,"'s number to ").concat(e.number),error:!1};S(n),I()},I=function(){setTimeout((function(){return S(F)}),[4444])};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(O,{message:C}),Object(j.jsx)(m,{filter:N,handleFilter:function(e){D(e.target.value)}}),Object(j.jsx)("h3",{children:"Add a new"}),Object(j.jsx)(b,{newName:s,newNumber:v,handleNewPerson:function(e){if(e.preventDefault(),t.find((function(e){return e.name===s&&e.number===v})))alert("".concat(s," is already added to phonebook"));else if(t.map((function(e){return e.name})).includes(s))window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&A();else{var n={name:s,number:v};d.create(n).then((function(e){r(t.concat(e))})),P(n)}},handleNewName:function(e){l(e.target.value)},handleNewNumber:function(e){x(e.target.value)}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(h,{persons:t,filter:N,handleDelete:function(e){if(window.confirm("Delete ".concat(e.name,"?"))){d.remove(e.id);var n=t.filter((function(n){return n.id!==e.id})),a={message:"Deleted ".concat(e.name),error:!1};r(n),S(a),I()}}})]})});a.a.render(Object(j.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.aa5d9de3.chunk.js.map