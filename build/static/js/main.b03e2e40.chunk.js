(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),o=t(3),i=t(2),u=t(4),s=t.n(u),d="/api/persons",l={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},remove:function(e){return s.a.delete(d+"/"+e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))}},m=t(0),f=function(e){e.filter;var n=e.handleFilter;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("p",{children:["filter shown with",Object(m.jsx)("input",{type:"text",onChange:n})]})})},j=function(e){var n=e.newName,t=e.newNumber,r=e.handleNewName,a=e.handleNewPerson,c=e.handleNewNumber;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:a,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:r})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:t,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})})},b=function(e){var n=e.person,t=e.handleDelete;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("p",{children:[n.name," ",n.number," ",Object(m.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})})},h=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return""===t?Object(m.jsx)(m.Fragment,{children:n.map((function(e){return Object(m.jsx)(b,{person:e,handleDelete:r},e.name)}))}):Object(m.jsx)(m.Fragment,{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(m.jsx)(b,{person:e,handleDelete:r},e.name)}))})},O=function(e){var n=e.message;return""===n.message?null:n.error?Object(m.jsx)("div",{className:"error",children:n.message}):Object(m.jsx)("div",{className:"confirmation",children:n.message})},v=(t(39),function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),u=Object(o.a)(a,2),s=u[0],d=u[1],b=Object(i.useState)(""),v=Object(o.a)(b,2),p=v[0],x=v[1],g=Object(i.useState)(""),w=Object(o.a)(g,2),N=w[0],D=w[1],y={message:"",error:!1},F=Object(i.useState)(y),k=Object(o.a)(F,2),C=k[0],S=k[1];Object(i.useEffect)((function(){l.getAll().then((function(e){r(e)}))}),[]);var A=function(){var e=t.find((function(e){return e.name===s})),n=Object(c.a)(Object(c.a)({},e),{},{number:p});l.update(n.id,n).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),P(n)})).catch((function(e){d(""),x("");var n={message:"Information of ".concat(s," has already been removed from the server."),error:!0};S(n),E();var a=t.filter((function(e){return e.name!==s}));r(a)}))},I=function(e){d(""),x("");var n={message:"Added ".concat(e.name),error:!1};S(n),E()},P=function(e){d(""),x("");var n={message:"Updated ".concat(e.name,"'s number to ").concat(e.number),error:!1};S(n),E()},E=function(){setTimeout((function(){return S(y)}),[4444])};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(O,{message:C}),Object(m.jsx)(f,{filter:N,handleFilter:function(e){D(e.target.value)}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(j,{newName:s,newNumber:p,handleNewPerson:function(e){if(e.preventDefault(),t.find((function(e){return e.name===s&&e.number===p})))alert("".concat(s," is already added to phonebook"));else if(t.map((function(e){return e.name})).includes(s))window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&A();else{var n={name:s,number:p};l.create(n).then((function(e){r(t.concat(e)),I(n)})).catch((function(e){var n={message:e.response.data.error,error:!0};S(n),E()}))}},handleNewName:function(e){d(e.target.value)},handleNewNumber:function(e){x(e.target.value)}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(h,{persons:t,filter:N,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&l.remove(e.id).then((function(n){var a=t.filter((function(n){return n.id!==e.id})),c={message:"Deleted ".concat(e.name),error:!1};r(a),S(c),E()})).catch((function(n){var a={message:"Information of ".concat(e.name," has already been removed from the server."),error:!0};S(a),E();var c=t.filter((function(n){return n.name!==e.name}));r(c)}))}})]})});a.a.render(Object(m.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b03e2e40.chunk.js.map